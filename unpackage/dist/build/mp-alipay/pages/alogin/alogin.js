(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/alogin/alogin"],{"0756":function(e,n,t){"use strict";t.r(n);var o=t("10b8"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"10b8":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{appid:"",secret:"",code:"",sessionKey:"",openId:"",id:"",userInfo:{avatarUrl:"",city:"",country:"",gender:1,language:"",nickName:""},pageOption:{}}},methods:{alGetUserInfo:function(){var n=this;return console.log(111),e.getUserInfo({provider:"alipay",success:function(t){console.log(t),n.userInfo=t.userInfo,e.request({url:"https://ccc.wangwanglive.com/index.php/api/Alixcx/get_userinfo",data:{id:n.id,avatarUrl:n.userInfo.avatarUrl,nickName:n.userInfo.nickName},method:"POST",success:function(t){if(0!=t.data.code)return e.showToast({title:t.data.msg,icon:"none"}),!1;e.showToast({title:"登录成功"});var o={user_id:t.data.memberid,user_nm:t.data.wx_name,user_img:t.data.img_url};e.setStorageSync("userlist",o),console.log(n.pageOptio),n.pageOption.backtype,e.redirectTo({url:n.pageOption.backpage})},fail:function(){e.showToast({title:"用户信息操作失败",icon:"none"})}})},fail:function(){e.showToast({title:"获取用户信息失败",icon:"none"})}}),!1},login:function(){var n=this;return e.showLoading({title:"登录中..."}),e.login({provider:"alipay",success:function(t){console.log(t),n.code=t.code,e.request({url:"https://ccc.wangwanglive.com/index.php/api/Alixcx/api_alilogin?code="+n.code+"&grant_type=authorization_code",success:function(t){if(console.log(t.data),n.id=t.data.memberid,e.hideLoading(),1==t.data.code&&e.showToast({title:t.data.msg,icon:"none"}),0==t.data.code){e.showToast({title:"登录成功"});t.data.memberid,t.data.wx_name,t.data.img_url;n.pageOption.backtype,e.redirectTo({url:n.pageOption.backpage})}},fail:function(){return e.showToast({title:"获取 SesssionKey OpenId 失败",icon:"none"}),!1}})},fail:function(){return e.showToast({title:"获取 code 失败",icon:"none"}),!1}}),!1}},onLoad:function(e){this.pageOption=e,this.login()}};n.default=t}).call(this,t("c11b")["default"])},"1d4d":function(e,n,t){"use strict";t.r(n);var o=t("f9be"),a=t("0756");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("ad83");var c,r=t("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);n["default"]=u.exports},"28d4":function(e,n,t){"use strict";(function(e){t("a2c3");o(t("66fd"));var n=o(t("1d4d"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("c11b")["createPage"])},ad83:function(e,n,t){"use strict";var o=t("af44"),a=t.n(o);a.a},af44:function(e,n,t){},f9be:function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}))}},[["28d4","common/runtime","common/vendor"]]]);